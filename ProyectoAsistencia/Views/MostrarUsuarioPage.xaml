<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:ProyectoAsistencia.Data.Converters"
             x:Class="ProyectoAsistencia.Views.MostrarUsuarioPage"
             Title="Gestion de Usuarios">

    <!-- Registra el convertidor 
    <ContentPage.Resources>
        <ResourceDictionary>
            <local:TipoUsuarioToVisibilityConverter x:Key="TipoUsuarioToVisibilityConverter" />
        </ResourceDictionary>
    </ContentPage.Resources> -->

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="accuracy"
                 IconImageSource="accuracy.png"
                 Order="Primary"
                 Priority="1"
                 Clicked="OnDesAdminClicked"
                 >

        </ToolbarItem>
        <ToolbarItem Text="home"
                 IconImageSource="home.png"
                 Order="Primary"
                 Priority="1"
                 Clicked="OnHomeClicked"
                 >

        </ToolbarItem>
        <ToolbarItem Text="addUser"
                 IconImageSource="addUser.png"
                 Order="Primary"
                 Priority="1"
                 Clicked="OnAddUserClicked"
                 >

        </ToolbarItem>
    </ContentPage.ToolbarItems>


    <ContentPage.Content>
        <ScrollView>
            <StackLayout BackgroundColor="#0082A6" Padding="20">

                <!-- Barra de búsqueda -->
                <SearchBar x:Name="EmpleadoSearchBar"
                   Placeholder="Buscar empleados..."
                   TextChanged="OnSearchBarTextChanged" />

                <!-- ListView con diseño más atractivo -->
                <ListView x:Name="Lista_Usuarios" HasUnevenRows="True" SeparatorVisibility="Default"
                          >
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <ViewCell>
                                <StackLayout Padding="10" BackgroundColor="White" Margin="5" Spacing="10" 
                                     HorizontalOptions="FillAndExpand" VerticalOptions="Start">

                                    <!-- Documento -->
                                    <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                        <Label.FormattedText>
                                            <FormattedString>
                                                <!-- Título fijo -->
                                                <Span Text="Identificacion Usuario: " FontAttributes="Bold" />

                                                <!-- Valor enlazado desde la base de datos -->
                                                <Span Text="{Binding IdentificacionUsuario}" />
                                            </FormattedString>
                                        </Label.FormattedText>
                                    </Label>                                

                                    <!-- Tipo documento -->
                                    <StackLayout Orientation="Vertical" Spacing="15">
                                        
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Tipo documento: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding TipoDocumentoUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Nombre Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding NombreUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Genero Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Genero Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding GeneroUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Cargo Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Cargo Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding CargoUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Celular Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Celular Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding CelularUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Correo Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Correo Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding CorreoUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Estado Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Estado Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding EstadoEmpleado}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- EPS Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="EPS Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding EPSEmpleado}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- ARL Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="ARL Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding ARLEmpleado}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Tipo Sangre Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Tipo Sangre Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding TipoSangreUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Nombre Contacto Emergencia Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Nombre de contacto de emergencia Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding NombreContactoEmergencia}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Numero Contacto Emergencia Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Numero de contacto de emergencia Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding NumeroContactoEmergencia}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Tipo Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Tipo Usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding TipoUsuario}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Código Tarjetero Usuario -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Código en tarjetero del usuario: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding NumeroTarjetero}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Empresa Asociada -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="Empresa asociada: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding Empresa}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Locacion Asociada -->
                                        <Label FontSize="Small" TextColor="#666" FontAttributes="Bold">
                                            <Label.FormattedText>
                                                <FormattedString>
                                                    <!-- Título fijo -->
                                                    <Span Text="LocacionAsociada: " FontAttributes="Bold" />

                                                    <!-- Valor enlazado desde la base de datos -->
                                                    <Span Text="{Binding Locacion}" />
                                                </FormattedString>
                                            </Label.FormattedText>
                                        </Label>

                                        <!-- Botones de Eliminar y Editar -->
                                        <StackLayout Orientation="Horizontal" Spacing="10" x:Name="mainControlLayout">
                                            <Button Text="Eliminar" BackgroundColor="Red" TextColor="White" 
                                                    CommandParameter="{Binding .}" Clicked="BtnDelete_Clicked" 
                                                    CornerRadius="20" HeightRequest="40" HorizontalOptions="FillAndExpand"/>
                                            <Button Text="Editar" BackgroundColor="RoyalBlue" TextColor="White" 
                                                    CommandParameter="{Binding .}" Clicked="BtnEdit_Clicked" 
                                                    CornerRadius="20" HeightRequest="40" HorizontalOptions="FillAndExpand"/>
                                            <!--
                                            <Button x:Name="BotonInhabilitarAdmin" 
                                                    Text="Inhabilitar Admin" 
                                                    BackgroundColor="RoyalBlue" 
                                                    TextColor="White" 
                                                    Clicked="BotonInhabilitarAdmin_Clicked_1" 
                                                    CornerRadius="20" 
                                                    HeightRequest="40" 
                                                    HorizontalOptions="FillAndExpand" 
                                                    IsVisible="false"/>
                                            -->
                                        </StackLayout>

                                    </StackLayout>
                                
                                </StackLayout>
                            </ViewCell>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>               
                

                <!-- Botón de volver -->
                <Button Text="Volver" BackgroundColor="Red" TextColor="White" CornerRadius="20" 
                VerticalOptions="End" Margin="0,20,0,0" HeightRequest="50" 
                Clicked="OnNavigateButtonClicked"/>
                
            </StackLayout>
        </ScrollView>    
    </ContentPage.Content>
</ContentPage>